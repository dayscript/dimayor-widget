<div ng-controller="WidgetDimStatisticsController">
    <div class="widget-dim-tabs">
        <ul>
            <li
            class="\{{ 'tournament-'+tab.id+' tabs-'+tabs.length}}"
            ng-repeat="tab in tabs" 
            ng-click="getTournament(tab)"
            ng-class="tab == tournament ? 'active' : ''">
                \{{ tab.title }}
            </li>
        </ul>
        <div class="clear-both"></div>
        <ul class="submenu hide-for-small-only \{{ 'tournament-'+tournament.id }}">
            <li
            ng-repeat="tab in active_tournament_tabs" 
            ng-click="getData(tournament.id, tournament.season, tab)"
            ng-class="'tabs-'+active_tournament_tabs.length">
                <span ng-class="tab == active_tournament_tab ? 'active' : ''">
                    \{{ tab.name }}
                </span>
            </li>
        </ul>
        <div class="clear-both"></div>
    </div>
    <div class="widget-dim-content">
        <select
        class="show-for-small-only"
        ng-model="active_tournament_tab"
        ng-change="getData(tournament.id, tournament.season, active_tournament_tab)"
        ng-options="tab as tab.name for tab in active_tournament_tabs">
        </select>
        <div ng-switch="active_tournament_tab.id">
            <div ng-switch-when="positions|reclassification" ng-switch-when-separator="|">
                <div class="row">
                    <div class="small-12 medium-4 columns">
                        <select 
                        ng-change="getPositions(tournament.id, tournament.season, phase)"
                        ng-model="phase"
                        ng-options="phase as phase.name for phase in phases">
                        </select>
                    </div>
                </div>
                <div class="row positions">
                    <div class="small-12 columns">
                        <table
                        ng-repeat="stage in stages track by stage.id">
                            <thead>
                                <tr>
                                    <th class="text-center" title="Posición">Pos</th>
                                    <th></th>
                                    <th class="text-center">Equipo</th>
                                    <th class="text-center" title="Puntos Totales">PT</th>
                                    <th class="text-center" title="Partidos Jugados">PJ</th>
                                    <th class="text-center" title="Partidos Ganados">PG</th>
                                    <th class="text-center" title="Goles a Favor">GF</th>
                                    <th class="text-center" title="Diferencia de Gol">DG</th>
                                    <th class="text-center" title="Partidos Empatados">PE</th>
                                    <th class="text-center" title="Partidos Perdidos">PP</th>
                                    <th class="hide-for-small-only text-center" title="Goles en Contra">GC</th>
                                    <th class="hide-for-small-only text-center" title="Goles a Favor como Visitante">GFV</th>
                                    <th class="hide-for-small-only text-center" title="Goles en Contra como Visitante">GCV</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="team in stage.teams">
                                    <td class="text-center">\{{team.pos}}</td>
                                    <td class="text-right">
                                        <img ng-src="//omo.akamai.opta.net/image.php?h=omo.akamai.opta.net&sport=football&entity=team&description=badges&dimensions=20&id=\{{team.id}}" alt="">
                                    </td>
                                    <td class="text-left">\{{team.name}}</td>
                                    <td class="text-center">\{{team.pt}}</td>
                                    <td class="text-center">\{{team.pj}}</td>
                                    <td class="text-center">\{{team.pg}}</td>
                                    <td class="text-center">\{{team.gf}}</td>
                                    <td class="text-center">\{{team.gd}}</td>
                                    <td class="text-center">\{{team.pe}}</td>
                                    <td class="text-center">\{{team.pp}}</td>
                                    <td class="hide-for-small-only text-center">\{{team.gc}}</td>
                                    <td class="hide-for-small-only text-center">\{{team.gfv}}</td>
                                    <td class="hide-for-small-only text-center">\{{team.gcv}}</td>
                                </tr>    
                            </tbody>
                        </table>
                    </div>
                </div>                
            </div>
            <div ng-switch-when="schedules">
                <div class="row collapse">
                    <div class="small-12 medium-4 columns">
                        <select 
                        ng-change="getSchedulesMatches(tournament.id, tournament.season, round)"
                        ng-model="round"
                        ng-options="round as round.name for round in rounds">
                        </select>
                    </div>
                </div>  
                <div ng-repeat="(key, group) in matches" class="schedules">
                    <div class="row schedules-titles">
                        <div class="small-12 medium-7 columns">
                            \{{ group.time == 0 ? group.tis : group.time | date:'MMMM dd yyyy' }}
                        </div>
                        <div class="small-12 medium-2 columns hide-for-small-only">Árbitro</div>
                        <div class="small-12 medium-3 columns hide-for-small-only">Estadio</div>
                    </div>
                    <div class="row schedules-content" ng-repeat="match in group.group">
                        <div class="small-12 medium-7 columns match-row">
                            <div class="row">
                                <div class="small-1 columns blue">
                                    \{{match.date | date:'HH:mm'}}
                                </div>
                                <div class="small-11 columns">
                                    <div class="row">
                                        <div class="small-5 columns text-right text-center-small">
                                            <div class="hide-for-small-only text-inline">\{{match.home.name }}</div>
                                            <img ng-src="//omo.akamai.opta.net/image.php?h=omo.akamai.opta.net&sport=football&entity=team&description=badges&dimensions=20&id=\{{match.home.id}}" alt="">
                                            <div class="show-for-small-only">\{{match.home.name }}</div>
                                        </div>
                                        <div class="small-2 columns text-center">
                                            <small ng-if="(match.lo.pe > 0 || match.vi.pe > 0)">(\{{match.home.pen_score}})</small>\{{match.home.score}} - \{{match.away.score}} <small ng-if="(match.lo.pe > 0 || match.vi.pe > 0)">(\{{match.away.pen_score}})</small>
                                        </div>
                                        <div class="small-5 columns text-left text-center-small">
                                            <img ng-src="//omo.akamai.opta.net/image.php?h=omo.akamai.opta.net&sport=football&entity=team&description=badges&dimensions=20&id=\{{match.away.id}}" alt="">
                                            <div class="text-inline">\{{match.away.name }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="small-12 medium-2 columns match-row hide-for-small-only">\{{match.official || 'Pendiente'}}</div>
                        <div class="small-12 medium-3 columns match-row hide-for-small-only">
                            \{{match.stadium || ''}}
                            <a class="expand" ng-click="getCriticalEvents(tournament, match, $event)">+</a>
                        </div>
                        <div class="small-12 columns match-detail" ng-class="'match-'+match.id">
                            <div class="row">
                                <div class="small-5 medium-5 columns text-right">
                                    <img ng-src="//omo.akamai.opta.net/image.php?h=omo.akamai.opta.net&sport=football&entity=team&description=badges&dimensions=65&id=\{{match.home.id}}" alt="" class="team hide-for-small-only">
                                </div>
                                <div class="small-2 medium-2 columns text-center big">
                                    <small ng-if="(match.lo.pe > 0 || match.vi.pe > 0)">(\{{match.home.pen_score}})</small>\{{match.home.score}} - \{{match.away.score}} <small ng-if="(match.lo.pe > 0 || match.vi.pe > 0)">(\{{match.away.pen_score}})</small>
                                </div>
                                <div class="small-5 medium-5 columns text-left">
                                    <img ng-src="//omo.akamai.opta.net/image.php?h=omo.akamai.opta.net&sport=football&entity=team&description=badges&dimensions=65&id=\{{match.away.id}}" alt="" class="team hide-for-small-only">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-switch-when="scorers">
                <div class="row scorers">
                    <div class="small-12 columns">
                        <table>
                            <thead>
                                <tr>
                                    <th class="text-center" title="Posición">Pos</th>
                                    <th></th>
                                    <th class="text-center">Jugador</th>
                                    <th class="text-center" title="Posición en la Cancha">Posición</th>
                                    <th class="text-center" title="Total de Goles">TG</th>
                                    <th class="text-center" title="Partidos Jugados">PJ</th>
                                    <th class="text-center" title="Goles">GJ</th>
                                    <th class="text-center" title="Goles de Cabeza">GC</th>
                                    <th class="text-center" title="Goles de Tiro Libre">GT</th>
                                    <th class="text-center" title="Goles de Tiro Penal">GP</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="player in scorers">
                                    <td>\{{ player.pos }}</td>
                                    <td class="text-right">
                                        <img class="img-team" ng-src="//omo.akamai.opta.net/image.php?h=omo.akamai.opta.net&sport=football&entity=team&description=badges&dimensions=20&id=\{{player.team_id}}"/>
                                    </td>
                                    <td class="text-left">\{{ player.name }}</td>
                                    <td class="text-center">\{{ player.position }}</td>
                                    <td class="text-center">\{{ player.goals }}</td>
                                    <td class="text-center">\{{ player.games_played }}</td>
                                    <td class="text-center">\{{ player.goals_openplay }}</td>
                                    <td class="text-center">\{{ player.goals_head }}</td>
                                    <td class="text-center">\{{ player.goals_freekick }}</td>
                                    <td class="text-center">\{{ player.goals_penal }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>                        
            </div>
        </div>
        <div class="loadlayer">
            <img src="assets/img/ajax-loader.gif">
        </div>
    </div>
</div>